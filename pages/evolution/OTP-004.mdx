---
title: "OTP-004: Argument-addressable contracts"
---

import { Callout } from 'nextra-theme-docs'

# OTP-004: Argument-addressable contracts

This proposal defines a way to address contracts by their arguments instead of their init data.

<Callout type="warning" emoji="⚠️">
This is a not a completed proposal.
</Callout>

## Motivation

Init data could be very different from from the arguments. This allows to avoid executing untrusted code from another contract in the context of a current one or executing TVM code off-chain for deployment that could be risky in some cases.

## Specification

This specification defines a way to write arguments to a init data cell to be read by the contract code during deployment.

### Prefix

The prefix is defined by a smart contract itself, but by a default it is assumed as a `single zero bit`. Prefix is used by the contract code to distinguish between deployed and not-deployed state.

### Arguments

Arguments are written as a cell snake. Each argument is written to the current cell if there is enough space. Otherwise, a new cell is created and stored as a reference to in a current tail.

### Primitives

Table below defines the rules about how to write primitive arguments. The primitives that are not listed in the table are not supported.

| Type              | Serialization               |
| :---------------: | :-------------------------: |
| Int               | `257 bit integer`           |
| Bool              | `a single bit`              |
| String            | `as reference`              |
| Cell              | `as reference`              |

### Structs and Messages

Structs and messages are written as is into a current cell if possible, if it is not, it is written to the next one.

## Drawbacks

- Contracts could be in a semi-deployed state
- There are multiple ways to write arguments that would end up in a different init data and a different address
- You can deploy a pre-initialized contract and it would have a different address while being fully functional
- Unpredictable gas usage on deployment. Deployments usually expensive, but this proposal makes it even more expensive.